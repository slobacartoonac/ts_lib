!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ECS=t():e.ECS=t()}(self,(()=>(()=>{"use strict";var e={116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityManager=t.Entity=void 0;class n{constructor(e){this.id=e}index(){return 4194303&this.id}generation(){return this.id>>22&255}}t.Entity=n,t.EntityManager=class{constructor(){this.free_indices=[],this.generation=new Map,this.entities=new Map,this.components=new Map}create(){let e=0;this.free_indices.length>0?e=this.free_indices.shift():(e=this.generation.size,this.generation.set(e,0));let t=this.make_entity(e,this.generation.get(e));return this.entities.set(e,t),t}make_entity(e,t){return new n(e+(t<<22))}alive(e){return this.generation.get(e.index())===e.generation()}destroy(e){this.components.delete(e.id),this.entities.delete(e.id);let t=e.index(),n=this.generation.get(t)+1;this.generation.set(t,n),this.free_indices.push(t)}asign(e,t){let n=this.components.get(t.id);if(!n)return void this.components.set(t.id,new Map([[e.constructor.name,[e]]]));let i=n.get(e.constructor.name);if(i){if(i&&n.get(e.constructor.name).find((t=>e===t)))throw Error("Component is allready asiged");n.get(e.constructor.name).push(e)}else this.components.get(t.id).set(e.constructor.name,[e])}get(e,t){let n=this.components.get(t.id);return n&&n.get(e.name)||[]}remove(e,t){let n=this.components.get(t.id);n&&n.get(e.constructor.name)&&n.set(e.constructor.name,n.get(e.constructor.name).filter((t=>t!==e)))}getEnities(e){return[...this.entities.values()].filter((t=>t&&this.get(e,t).length))}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}var i={};return(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.Entity=e.EntityManager=void 0;const t=n(116);Object.defineProperty(e,"EntityManager",{enumerable:!0,get:function(){return t.EntityManager}}),Object.defineProperty(e,"Entity",{enumerable:!0,get:function(){return t.Entity}})})(),i})()));